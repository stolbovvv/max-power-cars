"use strict";class Menu{constructor(){let{openClass:openClass="is-open",lockClass:lockClass="is-lock",activeClass:activeClass="is-active"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.element=document.querySelector(".js-menu"),this.trigger=document.querySelector(".js-menu-trigger"),this.options={openClass:openClass,lockClass:lockClass,activeClass:activeClass},this.init()}open=()=>{this.element.classList.add(this.options.openClass),this.trigger.classList.add(this.options.activeClass),document.body.classList.add(this.options.lockClass)};hide=()=>{this.element.classList.remove(this.options.openClass),this.trigger.classList.remove(this.options.activeClass),document.body.classList.remove(this.options.lockClass)};init(){const{element:element,trigger:trigger,options:options}=this;element&&(window.addEventListener("resize",this.hide),trigger.addEventListener("click",(()=>{element.classList.contains(options.openClass)?this.hide():this.open()})),element.addEventListener("click",(_ref=>{let{target:target}=_ref;target&&target.matches(".js-menu-hide")&&this.hide()})))}}class Tabs{constructor(){let element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".js-tabs",{activeClass:activeClass="is-current"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.tabsRoot="string"==typeof element?document.querySelector(element):element,this.tabsRoot&&(this.tabsTrigger=this.tabsRoot.querySelectorAll(".js-tabs-trigger"),this.tabsContent=this.tabsRoot.querySelectorAll(".js-tabs-content"),this.options={activeClass:activeClass},this.update=this.update.bind(this),this.init())}update(tabId){this.tabsTrigger.forEach((trigger=>{trigger.dataset.tabId===tabId&&trigger.classList.add(this.options.activeClass),trigger.dataset.tabId!==tabId&&trigger.classList.remove(this.options.activeClass)})),this.tabsContent.forEach((content=>{content.dataset.tabId===tabId&&content.classList.add(this.options.activeClass),content.dataset.tabId!==tabId&&content.classList.remove(this.options.activeClass)}))}init(){this.tabsTrigger.forEach((trigger=>{trigger.addEventListener("click",(()=>this.update(trigger.dataset.tabId)))})),this.update(this.tabsTrigger[0].dataset.tabId)}}class Popup{constructor(){let element=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".js-popup",{activeClass:activeClass="is-active",needLock:needLock=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.popupRoot="string"==typeof element?document.querySelector(element):element,this.popupRoot&&(this.popupTrigger=document.querySelectorAll(".js-popup-trigger"),this.options={needLock:needLock,activeClass:activeClass},this.init())}show(){this.popupRoot.classList.add(this.options.activeClass),this.options.needLock&&(document.body.style.overflow="hidden"),this.options.needLock&&(document.body.style["scrollbar-gutter"]="stable"),this.options.needLock&&(document.documentElement.style["scrollbar-gutter"]="stable")}hide(){this.popupRoot.classList.remove(this.options.activeClass),this.options.needLock&&document.body.style.removeProperty("overflow"),this.options.needLock&&document.body.style.removeProperty("scrollbar-gutter"),this.options.needLock&&document.documentElement.style.removeProperty("scrollbar-gutter")}init(){this.popupRoot.addEventListener("click",(e=>{e.target&&e.target===this.popupRoot&&this.hide()})),this.popupTrigger.forEach((trigger=>{trigger.addEventListener("click",(()=>{trigger.dataset.showPopup===this.popupRoot.id&&this.show(),trigger.dataset.hidePopup===this.popupRoot.id&&this.hide()}))}))}}class Sticky{constructor(){let selector=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".js-sticky",{activeClass:activeClass="is-active"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.element=document.querySelector(selector),this.options={activeClass:activeClass},this.init()}onScroll=()=>{if(window.scrollY){if(this.element.matches(this.options.activeClass))return;this.element.classList.add(this.options.activeClass)}else this.element.classList.remove(this.options.activeClass)};init(){this.element&&window.addEventListener("scroll",this.onScroll)}}window.addEventListener("DOMContentLoaded",(()=>{new Menu,new Tabs,new Popup,new Sticky;const mediaSlider=document.querySelector("#media-slider"),photoSlider=document.querySelector("#photo-slider"),compareSlider=document.querySelector("#compare-slider"),popupMainSlider=document.querySelector("#popup-slider");mediaSlider&&new Splide(mediaSlider,{pagination:!1,grid:{rows:2,cols:4,gap:{row:"20px",col:"20px"}},breakpoints:{1100:{grid:{cols:3}},767:{grid:{rows:1,cols:2,gap:{row:"10px",col:"10px"}}},575:{grid:{cols:1}}}}).mount(window.splide.Extensions),photoSlider&&new Splide(photoSlider,{type:"slide",gap:"20px",pagination:!1}).mount(window.splide.Extensions),compareSlider&&new Splide(compareSlider,{gap:0,perMove:1,perPage:2,pagination:!1,breakpoints:{575:{perPage:1}}}).mount(),popupMainSlider&&new Splide(popupMainSlider,{arrows:!1,pagination:!0}).mount();document.querySelectorAll(".select").forEach((select=>{new SlimSelect({select:select,settings:{showSearch:!1}})}))}));//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImJ1bmRsZS5qcyJdLCJuYW1lcyI6WyJNZW51IiwiY29uc3RydWN0b3IiLCJvcGVuQ2xhc3MiLCJsb2NrQ2xhc3MiLCJhY3RpdmVDbGFzcyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInRoaXMiLCJlbGVtZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwidHJpZ2dlciIsIm9wdGlvbnMiLCJpbml0Iiwib3BlbiIsImNsYXNzTGlzdCIsImFkZCIsImJvZHkiLCJoaWRlIiwicmVtb3ZlIiwid2luZG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsImNvbnRhaW5zIiwiX3JlZiIsInRhcmdldCIsIm1hdGNoZXMiLCJUYWJzIiwidGFic1Jvb3QiLCJ0YWJzVHJpZ2dlciIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0YWJzQ29udGVudCIsInVwZGF0ZSIsImJpbmQiLCJ0YWJJZCIsImZvckVhY2giLCJkYXRhc2V0IiwiY29udGVudCIsIlBvcHVwIiwibmVlZExvY2siLCJwb3B1cFJvb3QiLCJwb3B1cFRyaWdnZXIiLCJzaG93Iiwic3R5bGUiLCJkb2N1bWVudEVsZW1lbnQiLCJyZW1vdmVQcm9wZXJ0eSIsImUiLCJzaG93UG9wdXAiLCJpZCIsImhpZGVQb3B1cCIsIlN0aWNreSIsInNlbGVjdG9yIiwib25TY3JvbGwiLCJzY3JvbGxZIiwibWVkaWFTbGlkZXIiLCJwaG90b1NsaWRlciIsImNvbXBhcmVTbGlkZXIiLCJwb3B1cE1haW5TbGlkZXIiLCJTcGxpZGUiLCJwYWdpbmF0aW9uIiwiZ3JpZCIsInJvd3MiLCJjb2xzIiwiZ2FwIiwicm93IiwiY29sIiwiYnJlYWtwb2ludHMiLCJtb3VudCIsInNwbGlkZSIsIkV4dGVuc2lvbnMiLCJ0eXBlIiwicGVyTW92ZSIsInBlclBhZ2UiLCJhcnJvd3MiLCJzZWxlY3QiLCJTbGltU2VsZWN0Iiwic2V0dGluZ3MiLCJzaG93U2VhcmNoIl0sIm1hcHBpbmdzIjoiQUFBQSxhQUVBLE1BQU1BLEtBQ0xDLFdBQUFBLEdBQThGLElBQWxGQyxVQUFFQSxVQUFZLFVBQVNDLFVBQUVBLFVBQVksVUFBU0MsWUFBRUEsWUFBYyxhQUFhQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLENBQUMsRUFDMUZHLEtBQUtDLFFBQVVDLFNBQVNDLGNBQWMsWUFDdENILEtBQUtJLFFBQVVGLFNBQVNDLGNBQWMsb0JBRXRDSCxLQUFLSyxRQUFVLENBQ2RYLG9CQUNBQyxvQkFDQUMseUJBR0RJLEtBQUtNLE1BQ04sQ0FFQUMsS0FBT0EsS0FDTlAsS0FBS0MsUUFBUU8sVUFBVUMsSUFBSVQsS0FBS0ssUUFBUVgsV0FDeENNLEtBQUtJLFFBQVFJLFVBQVVDLElBQUlULEtBQUtLLFFBQVFULGFBQ3hDTSxTQUFTUSxLQUFLRixVQUFVQyxJQUFJVCxLQUFLSyxRQUFRVixVQUFVLEVBR3BEZ0IsS0FBT0EsS0FDTlgsS0FBS0MsUUFBUU8sVUFBVUksT0FBT1osS0FBS0ssUUFBUVgsV0FDM0NNLEtBQUtJLFFBQVFJLFVBQVVJLE9BQU9aLEtBQUtLLFFBQVFULGFBQzNDTSxTQUFTUSxLQUFLRixVQUFVSSxPQUFPWixLQUFLSyxRQUFRVixVQUFVLEVBR3ZEVyxJQUFBQSxHQUNDLE1BQU1MLFFBQUVBLFFBQU9HLFFBQUVBLFFBQU9DLFFBQUVBLFNBQVlMLEtBRWpDQyxVQUVMWSxPQUFPQyxpQkFBaUIsU0FBVWQsS0FBS1csTUFFdkNQLFFBQVFVLGlCQUFpQixTQUFTLEtBQzdCYixRQUFRTyxVQUFVTyxTQUFTVixRQUFRWCxXQUN0Q00sS0FBS1csT0FFTFgsS0FBS08sTUFDTixJQUdETixRQUFRYSxpQkFBaUIsU0FBU0UsT0FBZ0IsSUFBZkMsT0FBRUEsUUFBUUQsS0FDeENDLFFBQVVBLE9BQU9DLFFBQVEsa0JBQWtCbEIsS0FBS1csTUFBTSxJQUU1RCxFQUdELE1BQU1RLEtBQ0wxQixXQUFBQSxHQUF1RSxJQUEzRFEsUUFBT0osVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBRyxZQUFZRCxZQUFFQSxZQUFjLGNBQWNDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUcsQ0FBQyxFQUNuRUcsS0FBS29CLFNBQThCLGlCQUFabkIsUUFBdUJDLFNBQVNDLGNBQWNGLFNBQVdBLFFBRTVFRCxLQUFLb0IsV0FDUnBCLEtBQUtxQixZQUFjckIsS0FBS29CLFNBQVNFLGlCQUFpQixvQkFDbER0QixLQUFLdUIsWUFBY3ZCLEtBQUtvQixTQUFTRSxpQkFBaUIsb0JBRWxEdEIsS0FBS0ssUUFBVSxDQUNkVCx5QkFHREksS0FBS3dCLE9BQVN4QixLQUFLd0IsT0FBT0MsS0FBS3pCLE1BRS9CQSxLQUFLTSxPQUVQLENBRUFrQixNQUFBQSxDQUFPRSxPQUNOMUIsS0FBS3FCLFlBQVlNLFNBQVN2QixVQUNyQkEsUUFBUXdCLFFBQVFGLFFBQVVBLE9BQU90QixRQUFRSSxVQUFVQyxJQUFJVCxLQUFLSyxRQUFRVCxhQUNwRVEsUUFBUXdCLFFBQVFGLFFBQVVBLE9BQU90QixRQUFRSSxVQUFVSSxPQUFPWixLQUFLSyxRQUFRVCxZQUFZLElBR3hGSSxLQUFLdUIsWUFBWUksU0FBU0UsVUFDckJBLFFBQVFELFFBQVFGLFFBQVVBLE9BQU9HLFFBQVFyQixVQUFVQyxJQUFJVCxLQUFLSyxRQUFRVCxhQUNwRWlDLFFBQVFELFFBQVFGLFFBQVVBLE9BQU9HLFFBQVFyQixVQUFVSSxPQUFPWixLQUFLSyxRQUFRVCxZQUFZLEdBRXpGLENBRUFVLElBQUFBLEdBQ0NOLEtBQUtxQixZQUFZTSxTQUFTdkIsVUFDekJBLFFBQVFVLGlCQUFpQixTQUFTLElBQU1kLEtBQUt3QixPQUFPcEIsUUFBUXdCLFFBQVFGLFFBQU8sSUFHNUUxQixLQUFLd0IsT0FBT3hCLEtBQUtxQixZQUFZLEdBQUdPLFFBQVFGLE1BQ3pDLEVBR0QsTUFBTUksTUFDTHJDLFdBQUFBLEdBQXdGLElBQTVFUSxRQUFPSixVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLGFBQWFELFlBQUVBLFlBQWMsWUFBV21DLFNBQUVBLFVBQVcsR0FBTWxDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUcsQ0FBQyxFQUNwRkcsS0FBS2dDLFVBQStCLGlCQUFaL0IsUUFBdUJDLFNBQVNDLGNBQWNGLFNBQVdBLFFBRTdFRCxLQUFLZ0MsWUFDUmhDLEtBQUtpQyxhQUFlL0IsU0FBU29CLGlCQUFpQixxQkFFOUN0QixLQUFLSyxRQUFVLENBQ2QwQixrQkFDQW5DLHlCQUdESSxLQUFLTSxPQUVQLENBRUE0QixJQUFBQSxHQUNDbEMsS0FBS2dDLFVBQVV4QixVQUFVQyxJQUFJVCxLQUFLSyxRQUFRVCxhQUV0Q0ksS0FBS0ssUUFBUTBCLFdBQVU3QixTQUFTUSxLQUFLeUIsTUFBZ0IsU0FBSSxVQUN6RG5DLEtBQUtLLFFBQVEwQixXQUFVN0IsU0FBU1EsS0FBS3lCLE1BQU0sb0JBQXNCLFVBQ2pFbkMsS0FBS0ssUUFBUTBCLFdBQVU3QixTQUFTa0MsZ0JBQWdCRCxNQUFNLG9CQUFzQixTQUNqRixDQUVBeEIsSUFBQUEsR0FDQ1gsS0FBS2dDLFVBQVV4QixVQUFVSSxPQUFPWixLQUFLSyxRQUFRVCxhQUV6Q0ksS0FBS0ssUUFBUTBCLFVBQVU3QixTQUFTUSxLQUFLeUIsTUFBTUUsZUFBZSxZQUMxRHJDLEtBQUtLLFFBQVEwQixVQUFVN0IsU0FBU1EsS0FBS3lCLE1BQU1FLGVBQWUsb0JBQzFEckMsS0FBS0ssUUFBUTBCLFVBQVU3QixTQUFTa0MsZ0JBQWdCRCxNQUFNRSxlQUFlLG1CQUMxRSxDQUVBL0IsSUFBQUEsR0FDQ04sS0FBS2dDLFVBQVVsQixpQkFBaUIsU0FBVXdCLElBQ3JDQSxFQUFFckIsUUFBVXFCLEVBQUVyQixTQUFXakIsS0FBS2dDLFdBQVdoQyxLQUFLVyxNQUFNLElBR3pEWCxLQUFLaUMsYUFBYU4sU0FBU3ZCLFVBQzFCQSxRQUFRVSxpQkFBaUIsU0FBUyxLQUM3QlYsUUFBUXdCLFFBQVFXLFlBQWN2QyxLQUFLZ0MsVUFBVVEsSUFBSXhDLEtBQUtrQyxPQUN0RDlCLFFBQVF3QixRQUFRYSxZQUFjekMsS0FBS2dDLFVBQVVRLElBQUl4QyxLQUFLVyxNQUFNLEdBQy9ELEdBRUosRUFHRCxNQUFNK0IsT0FDTGpELFdBQUFBLEdBQXlFLElBQTdEa0QsU0FBUTlDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUcsY0FBY0QsWUFBRUEsWUFBYyxhQUFhQyxVQUFBQyxPQUFBLFFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFHLENBQUMsRUFDckVHLEtBQUtDLFFBQVVDLFNBQVNDLGNBQWN3QyxVQUN0QzNDLEtBQUtLLFFBQVUsQ0FDZFQseUJBR0RJLEtBQUtNLE1BQ04sQ0FFQXNDLFNBQVdBLEtBQ1YsR0FBSS9CLE9BQU9nQyxRQUFTLENBQ25CLEdBQUk3QyxLQUFLQyxRQUFRaUIsUUFBUWxCLEtBQUtLLFFBQVFULGFBQWMsT0FFcERJLEtBQUtDLFFBQVFPLFVBQVVDLElBQUlULEtBQUtLLFFBQVFULFlBQ3pDLE1BQ0NJLEtBQUtDLFFBQVFPLFVBQVVJLE9BQU9aLEtBQUtLLFFBQVFULFlBQzVDLEVBR0RVLElBQUFBLEdBQ01OLEtBQUtDLFNBRVZZLE9BQU9DLGlCQUFpQixTQUFVZCxLQUFLNEMsU0FDeEMsRUFHRC9CLE9BQU9DLGlCQUFpQixvQkFBb0IsS0FFM0MsSUFBSXRCLEtBR0osSUFBSTJCLEtBR0osSUFBSVcsTUFHSixJQUFJWSxPQUdKLE1BQU1JLFlBQWM1QyxTQUFTQyxjQUFjLGlCQUNyQzRDLFlBQWM3QyxTQUFTQyxjQUFjLGlCQUNyQzZDLGNBQWdCOUMsU0FBU0MsY0FBYyxtQkFDdkM4QyxnQkFBa0IvQyxTQUFTQyxjQUFjLGlCQUUzQzJDLGFBQ0gsSUFBSUksT0FBT0osWUFBYSxDQUN2QkssWUFBWSxFQUNaQyxLQUFNLENBQ0xDLEtBQU0sRUFDTkMsS0FBTSxFQUNOQyxJQUFLLENBQ0pDLElBQUssT0FDTEMsSUFBSyxTQUdQQyxZQUFhLENBQ1osS0FBTSxDQUNMTixLQUFNLENBQ0xFLEtBQU0sSUFHUixJQUFLLENBQ0pGLEtBQU0sQ0FDTEMsS0FBTSxFQUNOQyxLQUFNLEVBQ05DLElBQUssQ0FDSkMsSUFBSyxPQUNMQyxJQUFLLFVBSVIsSUFBSyxDQUNKTCxLQUFNLENBQ0xFLEtBQU0sT0FJUEssTUFBTTlDLE9BQU8rQyxPQUFPQyxZQUdwQmQsYUFDSCxJQUFJRyxPQUFPSCxZQUFhLENBQ3ZCZSxLQUFNLFFBQ05QLElBQUssT0FDTEosWUFBWSxJQUNWUSxNQUFNOUMsT0FBTytDLE9BQU9DLFlBR3BCYixlQUNILElBQUlFLE9BQU9GLGNBQWUsQ0FDekJPLElBQUssRUFDTFEsUUFBUyxFQUNUQyxRQUFTLEVBQ1RiLFlBQVksRUFDWk8sWUFBYSxDQUNaLElBQUssQ0FDSk0sUUFBUyxNQUdUTCxRQUdBVixpQkFDSCxJQUFJQyxPQUFPRCxnQkFBaUIsQ0FDM0JnQixRQUFRLEVBQ1JkLFlBQVksSUFDVlEsUUFJWXpELFNBQVNvQixpQkFBaUIsV0FFbENLLFNBQVN1QyxTQUNoQixJQUFJQyxXQUFXLENBQ2RELE9BQVFBLE9BQ1JFLFNBQVUsQ0FDVEMsWUFBWSxJQUVaLEdBQ0QiLCJmaWxlIjoiYnVuZGxlLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIGdsb2JhbCBTcGxpZGUgU2xpbVNlbGVjdCAqL1xuXG5jbGFzcyBNZW51IHtcblx0Y29uc3RydWN0b3IoeyBvcGVuQ2xhc3MgPSAnaXMtb3BlbicsIGxvY2tDbGFzcyA9ICdpcy1sb2NrJywgYWN0aXZlQ2xhc3MgPSAnaXMtYWN0aXZlJyB9ID0ge30pIHtcblx0XHR0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuanMtbWVudScpO1xuXHRcdHRoaXMudHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5qcy1tZW51LXRyaWdnZXInKTtcblxuXHRcdHRoaXMub3B0aW9ucyA9IHtcblx0XHRcdG9wZW5DbGFzcyxcblx0XHRcdGxvY2tDbGFzcyxcblx0XHRcdGFjdGl2ZUNsYXNzLFxuXHRcdH07XG5cblx0XHR0aGlzLmluaXQoKTtcblx0fVxuXG5cdG9wZW4gPSAoKSA9PiB7XG5cdFx0dGhpcy5lbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLm9wZW5DbGFzcyk7XG5cdFx0dGhpcy50cmlnZ2VyLmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmxvY2tDbGFzcyk7XG5cdH07XG5cblx0aGlkZSA9ICgpID0+IHtcblx0XHR0aGlzLmVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMub3BlbkNsYXNzKTtcblx0XHR0aGlzLnRyaWdnZXIuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuXHRcdGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMubG9ja0NsYXNzKTtcblx0fTtcblxuXHRpbml0KCkge1xuXHRcdGNvbnN0IHsgZWxlbWVudCwgdHJpZ2dlciwgb3B0aW9ucyB9ID0gdGhpcztcblxuXHRcdGlmICghZWxlbWVudCkgcmV0dXJuO1xuXG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuaGlkZSk7XG5cblx0XHR0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0aWYgKGVsZW1lbnQuY2xhc3NMaXN0LmNvbnRhaW5zKG9wdGlvbnMub3BlbkNsYXNzKSkge1xuXHRcdFx0XHR0aGlzLmhpZGUoKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRoaXMub3BlbigpO1xuXHRcdFx0fVxuXHRcdH0pO1xuXG5cdFx0ZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICh7IHRhcmdldCB9KSA9PiB7XG5cdFx0XHRpZiAodGFyZ2V0ICYmIHRhcmdldC5tYXRjaGVzKCcuanMtbWVudS1oaWRlJykpIHRoaXMuaGlkZSgpO1xuXHRcdH0pO1xuXHR9XG59XG5cbmNsYXNzIFRhYnMge1xuXHRjb25zdHJ1Y3RvcihlbGVtZW50ID0gJy5qcy10YWJzJywgeyBhY3RpdmVDbGFzcyA9ICdpcy1jdXJyZW50JyB9ID0ge30pIHtcblx0XHR0aGlzLnRhYnNSb290ID0gdHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KSA6IGVsZW1lbnQ7XG5cblx0XHRpZiAodGhpcy50YWJzUm9vdCkge1xuXHRcdFx0dGhpcy50YWJzVHJpZ2dlciA9IHRoaXMudGFic1Jvb3QucXVlcnlTZWxlY3RvckFsbCgnLmpzLXRhYnMtdHJpZ2dlcicpO1xuXHRcdFx0dGhpcy50YWJzQ29udGVudCA9IHRoaXMudGFic1Jvb3QucXVlcnlTZWxlY3RvckFsbCgnLmpzLXRhYnMtY29udGVudCcpO1xuXG5cdFx0XHR0aGlzLm9wdGlvbnMgPSB7XG5cdFx0XHRcdGFjdGl2ZUNsYXNzLFxuXHRcdFx0fTtcblxuXHRcdFx0dGhpcy51cGRhdGUgPSB0aGlzLnVwZGF0ZS5iaW5kKHRoaXMpO1xuXG5cdFx0XHR0aGlzLmluaXQoKTtcblx0XHR9XG5cdH1cblxuXHR1cGRhdGUodGFiSWQpIHtcblx0XHR0aGlzLnRhYnNUcmlnZ2VyLmZvckVhY2goKHRyaWdnZXIpID0+IHtcblx0XHRcdGlmICh0cmlnZ2VyLmRhdGFzZXQudGFiSWQgPT09IHRhYklkKSB0cmlnZ2VyLmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcblx0XHRcdGlmICh0cmlnZ2VyLmRhdGFzZXQudGFiSWQgIT09IHRhYklkKSB0cmlnZ2VyLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcblx0XHR9KTtcblxuXHRcdHRoaXMudGFic0NvbnRlbnQuZm9yRWFjaCgoY29udGVudCkgPT4ge1xuXHRcdFx0aWYgKGNvbnRlbnQuZGF0YXNldC50YWJJZCA9PT0gdGFiSWQpIGNvbnRlbnQuY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuXHRcdFx0aWYgKGNvbnRlbnQuZGF0YXNldC50YWJJZCAhPT0gdGFiSWQpIGNvbnRlbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuXHRcdH0pO1xuXHR9XG5cblx0aW5pdCgpIHtcblx0XHR0aGlzLnRhYnNUcmlnZ2VyLmZvckVhY2goKHRyaWdnZXIpID0+IHtcblx0XHRcdHRyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLnVwZGF0ZSh0cmlnZ2VyLmRhdGFzZXQudGFiSWQpKTtcblx0XHR9KTtcblxuXHRcdHRoaXMudXBkYXRlKHRoaXMudGFic1RyaWdnZXJbMF0uZGF0YXNldC50YWJJZCk7XG5cdH1cbn1cblxuY2xhc3MgUG9wdXAge1xuXHRjb25zdHJ1Y3RvcihlbGVtZW50ID0gJy5qcy1wb3B1cCcsIHsgYWN0aXZlQ2xhc3MgPSAnaXMtYWN0aXZlJywgbmVlZExvY2sgPSB0cnVlIH0gPSB7fSkge1xuXHRcdHRoaXMucG9wdXBSb290ID0gdHlwZW9mIGVsZW1lbnQgPT09ICdzdHJpbmcnID8gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlbGVtZW50KSA6IGVsZW1lbnQ7XG5cblx0XHRpZiAodGhpcy5wb3B1cFJvb3QpIHtcblx0XHRcdHRoaXMucG9wdXBUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLmpzLXBvcHVwLXRyaWdnZXJgKTtcblxuXHRcdFx0dGhpcy5vcHRpb25zID0ge1xuXHRcdFx0XHRuZWVkTG9jayxcblx0XHRcdFx0YWN0aXZlQ2xhc3MsXG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLmluaXQoKTtcblx0XHR9XG5cdH1cblxuXHRzaG93KCkge1xuXHRcdHRoaXMucG9wdXBSb290LmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcblxuXHRcdGlmICh0aGlzLm9wdGlvbnMubmVlZExvY2spIGRvY3VtZW50LmJvZHkuc3R5bGVbJ292ZXJmbG93J10gPSAnaGlkZGVuJztcblx0XHRpZiAodGhpcy5vcHRpb25zLm5lZWRMb2NrKSBkb2N1bWVudC5ib2R5LnN0eWxlWydzY3JvbGxiYXItZ3V0dGVyJ10gPSAnc3RhYmxlJztcblx0XHRpZiAodGhpcy5vcHRpb25zLm5lZWRMb2NrKSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGVbJ3Njcm9sbGJhci1ndXR0ZXInXSA9ICdzdGFibGUnO1xuXHR9XG5cblx0aGlkZSgpIHtcblx0XHR0aGlzLnBvcHVwUm9vdC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG5cblx0XHRpZiAodGhpcy5vcHRpb25zLm5lZWRMb2NrKSBkb2N1bWVudC5ib2R5LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xuXHRcdGlmICh0aGlzLm9wdGlvbnMubmVlZExvY2spIGRvY3VtZW50LmJvZHkuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3Njcm9sbGJhci1ndXR0ZXInKTtcblx0XHRpZiAodGhpcy5vcHRpb25zLm5lZWRMb2NrKSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3Njcm9sbGJhci1ndXR0ZXInKTtcblx0fVxuXG5cdGluaXQoKSB7XG5cdFx0dGhpcy5wb3B1cFJvb3QuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuXHRcdFx0aWYgKGUudGFyZ2V0ICYmIGUudGFyZ2V0ID09PSB0aGlzLnBvcHVwUm9vdCkgdGhpcy5oaWRlKCk7XG5cdFx0fSk7XG5cblx0XHR0aGlzLnBvcHVwVHJpZ2dlci5mb3JFYWNoKCh0cmlnZ2VyKSA9PiB7XG5cdFx0XHR0cmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuXHRcdFx0XHRpZiAodHJpZ2dlci5kYXRhc2V0LnNob3dQb3B1cCA9PT0gdGhpcy5wb3B1cFJvb3QuaWQpIHRoaXMuc2hvdygpO1xuXHRcdFx0XHRpZiAodHJpZ2dlci5kYXRhc2V0LmhpZGVQb3B1cCA9PT0gdGhpcy5wb3B1cFJvb3QuaWQpIHRoaXMuaGlkZSgpO1xuXHRcdFx0fSk7XG5cdFx0fSk7XG5cdH1cbn1cblxuY2xhc3MgU3RpY2t5IHtcblx0Y29uc3RydWN0b3Ioc2VsZWN0b3IgPSAnLmpzLXN0aWNreScsIHsgYWN0aXZlQ2xhc3MgPSAnaXMtYWN0aXZlJyB9ID0ge30pIHtcblx0XHR0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHNlbGVjdG9yKTtcblx0XHR0aGlzLm9wdGlvbnMgPSB7XG5cdFx0XHRhY3RpdmVDbGFzcyxcblx0XHR9O1xuXG5cdFx0dGhpcy5pbml0KCk7XG5cdH1cblxuXHRvblNjcm9sbCA9ICgpID0+IHtcblx0XHRpZiAod2luZG93LnNjcm9sbFkpIHtcblx0XHRcdGlmICh0aGlzLmVsZW1lbnQubWF0Y2hlcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpKSByZXR1cm47XG5cblx0XHRcdHRoaXMuZWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMuZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG5cdFx0fVxuXHR9O1xuXG5cdGluaXQoKSB7XG5cdFx0aWYgKCF0aGlzLmVsZW1lbnQpIHJldHVybjtcblxuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLm9uU2Nyb2xsKTtcblx0fVxufVxuXG53aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsICgpID0+IHtcblx0Ly8gU2l0ZSBtZW51XG5cdG5ldyBNZW51KCk7XG5cblx0Ly8gU2l0ZSB0YWJzXG5cdG5ldyBUYWJzKCk7XG5cblx0Ly8gU2l0ZSBQb3B1cFxuXHRuZXcgUG9wdXAoKTtcblxuXHQvLyBTdGlja3kgaGVhZGVyXG5cdG5ldyBTdGlja3koKTtcblxuXHQvLyBTbGlkZXJzXG5cdGNvbnN0IG1lZGlhU2xpZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI21lZGlhLXNsaWRlcicpO1xuXHRjb25zdCBwaG90b1NsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwaG90by1zbGlkZXInKTtcblx0Y29uc3QgY29tcGFyZVNsaWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjb21wYXJlLXNsaWRlcicpO1xuXHRjb25zdCBwb3B1cE1haW5TbGlkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjcG9wdXAtc2xpZGVyJyk7XG5cblx0aWYgKG1lZGlhU2xpZGVyKSB7XG5cdFx0bmV3IFNwbGlkZShtZWRpYVNsaWRlciwge1xuXHRcdFx0cGFnaW5hdGlvbjogZmFsc2UsXG5cdFx0XHRncmlkOiB7XG5cdFx0XHRcdHJvd3M6IDIsXG5cdFx0XHRcdGNvbHM6IDQsXG5cdFx0XHRcdGdhcDoge1xuXHRcdFx0XHRcdHJvdzogJzIwcHgnLFxuXHRcdFx0XHRcdGNvbDogJzIwcHgnLFxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHRcdGJyZWFrcG9pbnRzOiB7XG5cdFx0XHRcdDExMDA6IHtcblx0XHRcdFx0XHRncmlkOiB7XG5cdFx0XHRcdFx0XHRjb2xzOiAzLFxuXHRcdFx0XHRcdH0sXG5cdFx0XHRcdH0sXG5cdFx0XHRcdDc2Nzoge1xuXHRcdFx0XHRcdGdyaWQ6IHtcblx0XHRcdFx0XHRcdHJvd3M6IDEsXG5cdFx0XHRcdFx0XHRjb2xzOiAyLFxuXHRcdFx0XHRcdFx0Z2FwOiB7XG5cdFx0XHRcdFx0XHRcdHJvdzogJzEwcHgnLFxuXHRcdFx0XHRcdFx0XHRjb2w6ICcxMHB4Jyxcblx0XHRcdFx0XHRcdH0sXG5cdFx0XHRcdFx0fSxcblx0XHRcdFx0fSxcblx0XHRcdFx0NTc1OiB7XG5cdFx0XHRcdFx0Z3JpZDoge1xuXHRcdFx0XHRcdFx0Y29sczogMSxcblx0XHRcdFx0XHR9LFxuXHRcdFx0XHR9LFxuXHRcdFx0fSxcblx0XHR9KS5tb3VudCh3aW5kb3cuc3BsaWRlLkV4dGVuc2lvbnMpO1xuXHR9XG5cblx0aWYgKHBob3RvU2xpZGVyKSB7XG5cdFx0bmV3IFNwbGlkZShwaG90b1NsaWRlciwge1xuXHRcdFx0dHlwZTogJ3NsaWRlJyxcblx0XHRcdGdhcDogJzIwcHgnLFxuXHRcdFx0cGFnaW5hdGlvbjogZmFsc2UsXG5cdFx0fSkubW91bnQod2luZG93LnNwbGlkZS5FeHRlbnNpb25zKTtcblx0fVxuXG5cdGlmIChjb21wYXJlU2xpZGVyKSB7XG5cdFx0bmV3IFNwbGlkZShjb21wYXJlU2xpZGVyLCB7XG5cdFx0XHRnYXA6IDAsXG5cdFx0XHRwZXJNb3ZlOiAxLFxuXHRcdFx0cGVyUGFnZTogMixcblx0XHRcdHBhZ2luYXRpb246IGZhbHNlLFxuXHRcdFx0YnJlYWtwb2ludHM6IHtcblx0XHRcdFx0NTc1OiB7XG5cdFx0XHRcdFx0cGVyUGFnZTogMSxcblx0XHRcdFx0fSxcblx0XHRcdH0sXG5cdFx0fSkubW91bnQoKTtcblx0fVxuXG5cdGlmIChwb3B1cE1haW5TbGlkZXIpIHtcblx0XHRuZXcgU3BsaWRlKHBvcHVwTWFpblNsaWRlciwge1xuXHRcdFx0YXJyb3dzOiBmYWxzZSxcblx0XHRcdHBhZ2luYXRpb246IHRydWUsXG5cdFx0fSkubW91bnQoKTtcblx0fVxuXG5cdC8vIFNlbGVjdHNcblx0Y29uc3Qgc2VsZWN0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zZWxlY3QnKTtcblxuXHRzZWxlY3RzLmZvckVhY2goKHNlbGVjdCkgPT4ge1xuXHRcdG5ldyBTbGltU2VsZWN0KHtcblx0XHRcdHNlbGVjdDogc2VsZWN0LFxuXHRcdFx0c2V0dGluZ3M6IHtcblx0XHRcdFx0c2hvd1NlYXJjaDogZmFsc2UsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9KTtcbn0pO1xuIl19
